<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RemindU - Platform Tugas Sekolah</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #fef5ff 0%, #fef3c7 50%, #dbeafe 100%);
      min-height: 100%;
      height: 100%;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(167, 139, 250, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(251, 113, 133, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(134, 239, 172, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 70% 40%, rgba(252, 211, 77, 0.15) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    
    body::after {
      content: '‚ú® üåü ‚≠ê üí´ ‚ú® üåü ‚≠ê üí´ ‚ú® üåü ÔøΩÔøΩ üí´ ‚ú® üåü ‚≠ê üí´';
      position: fixed;
      top: 20px;
      left: 0;
      right: 0;
      font-size: 30px;
      opacity: 0.3;
      pointer-events: none;
      z-index: 0;
      animation: sparkleMove 20s linear infinite;
    }
    
    @keyframes sparkleMove {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    html {
      height: 100%;
    }
    
    * {
      box-sizing: border-box;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      height: 100%;
      position: relative;
      z-index: 1;
    }
    
    .login-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100%;
      padding: 20px;
    }
    
    .login-box {
      background: linear-gradient(135deg, #fef3c7 0%, #fce7f3 50%, #ddd6fe 100%);
      padding: 40px;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(167, 139, 250, 0.3), 0 0 0 8px rgba(255,255,255,0.8);
      width: 100%;
      max-width: 450px;
      text-align: center;
      position: relative;
      z-index: 1;
      border: 4px solid rgba(255,255,255,0.9);
      animation: floatBox 3s ease-in-out infinite;
    }
    
    @keyframes floatBox {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .app-logo {
      font-size: 48px;
      margin-bottom: 10px;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .app-title {
      font-size: 48px;
      font-weight: 900;
      background: linear-gradient(135deg, #a78bfa 0%, #fb7185 50%, #fbbf24 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      text-shadow: 2px 2px 20px rgba(167, 139, 250, 0.5);
      letter-spacing: 2px;
      animation: titlePulse 2s ease-in-out infinite;
    }
    
    @keyframes titlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .app-subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
      font-size: 14px;
    }
    
    .form-group input {
      width: 100%;
      padding: 14px 20px;
      border: 3px solid #e9d5ff;
      border-radius: 20px;
      font-size: 16px;
      transition: all 0.3s;
      background: rgba(255,255,255,0.9);
      font-weight: 600;
      color: #5a4d6f;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: #a78bfa;
      box-shadow: 0 0 0 4px rgba(167, 139, 250, 0.2), 0 8px 20px rgba(167, 139, 250, 0.3);
      transform: translateY(-2px);
      background: white;
    }
    
    .btn-primary {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #a78bfa 0%, #fb7185 50%, #fbbf24 100%);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 18px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 25px rgba(167, 139, 250, 0.4), 0 0 0 4px rgba(255,255,255,0.5);
      position: relative;
      overflow: hidden;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn-primary:hover::before {
      width: 300px;
      height: 300px;
    }
    
    .btn-primary:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 12px 35px rgba(167, 139, 250, 0.5), 0 0 0 6px rgba(255,255,255,0.7);
    }
    
    .btn-primary:active {
      transform: translateY(-2px) scale(0.98);
    }
    
    .error-message {
      background: #ffebee;
      color: #c62828;
      padding: 12px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 14px;
      display: none;
    }
    
    .header {
      background: linear-gradient(135deg, #fef3c7 0%, #fce7f3 50%, #ddd6fe 100%);
      padding: 25px 35px;
      border-radius: 30px;
      box-shadow: 0 10px 40px rgba(167, 139, 250, 0.3), 0 0 0 6px rgba(255,255,255,0.9);
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
      border: 4px solid rgba(255,255,255,0.9);
      position: relative;
      z-index: 1;
      overflow: hidden;
    }
    
    .header::before {
      content: 'üìö ‚úèÔ∏è üìù üé® ÔøΩÔøΩÔøΩ ‚ú®';
      position: absolute;
      top: 10px;
      right: -50px;
      font-size: 80px;
      opacity: 0.1;
      transform: rotate(-15deg);
    }
    
    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .header-icon {
      font-size: 32px;
      animation: bounce 2s infinite;
    }
    
    .header-title {
      font-size: 28px;
      font-weight: bold;
      background: linear-gradient(135deg, #42a5f5 0%, #ec407a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, #e3f2fd 0%, #fce4ec 100%);
      padding: 12px 20px;
      border-radius: 12px;
    }
    
    .user-name {
      font-weight: 600;
      color: #333;
    }
    
    .btn-logout {
      padding: 16px 32px;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 700;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(239, 83, 80, 0.3);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      min-width: 120px;
      min-height: 48px;
      position: relative;
      z-index: 10;
    }
    
    .btn-logout:hover {
      background: linear-gradient(135deg, #ee5a6f 0%, #e53935 100%);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(239, 83, 80, 0.5);
    }
    
    .btn-logout:active {
      transform: translateY(-1px);
    }
    
    .dashboard-student {
      display: none;
    }
    
    .dashboard-teacher {
      display: none;
    }
    
    .columns-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .column {
      background: rgba(255,255,255,0.95);
      border-radius: 30px;
      padding: 28px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1), 0 0 0 5px rgba(255,255,255,0.8);
      border: 3px solid rgba(255,255,255,0.9);
      position: relative;
      z-index: 1;
    }
    
    .column-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
      padding: 16px;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.6) 100%);
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
    
    .column-icon {
      font-size: 32px;
      animation: iconBounce 2s ease-in-out infinite;
    }
    
    @keyframes iconBounce {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-8px) rotate(5deg); }
    }
    
    .column-title {
      font-size: 22px;
      font-weight: 900;
      color: #5a4d6f;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .column-new .column-header {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      border: 3px solid #60a5fa;
    }
    
    .column-new .column-title {
      color: #1e40af;
    }
    
    .column-urgent .column-header {
      background: linear-gradient(135deg, #fed7aa 0%, #fef3c7 100%);
      border: 3px solid #fb923c;
    }
    
    .column-urgent .column-title {
      color: #c2410c;
    }
    
    .column-done .column-header {
      background: linear-gradient(135deg, #d1fae5 0%, #dbeafe 100%);
      border: 3px solid #34d399;
    }
    
    .column-done .column-title {
      color: #065f46;
    }
    
    .task-card {
      background: white;
      padding: 20px;
      border-radius: 25px;
      margin-bottom: 16px;
      transition: all 0.3s;
      border: 4px solid transparent;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      position: relative;
      overflow: hidden;
    }
    
    .task-card::before {
      content: '‚≠ê';
      position: absolute;
      top: -15px;
      right: -15px;
      font-size: 60px;
      opacity: 0.15;
      transform: rotate(-15deg);
    }
    
    .task-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 15px 40px rgba(167, 139, 250, 0.25);
    }
    
    .column-new .task-card {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      border-color: #60a5fa;
    }
    
    .column-new .task-card:hover {
      box-shadow: 0 15px 40px rgba(96, 165, 250, 0.35);
    }
    
    .column-urgent .task-card {
      background: linear-gradient(135deg, #fed7aa 0%, #fef3c7 100%);
      border-color: #fb923c;
    }
    
    .column-urgent .task-card::before {
      content: '‚ö°';
    }
    
    .column-urgent .task-card:hover {
      box-shadow: 0 15px 40px rgba(251, 146, 60, 0.35);
    }
    
    .column-done .task-card {
      background: linear-gradient(135deg, #d1fae5 0%, #dbeafe 100%);
      border-color: #34d399;
    }
    
    .column-done .task-card::before {
      content: '‚ú®';
    }
    
    .column-done .task-card:hover {
      box-shadow: 0 15px 40px rgba(52, 211, 153, 0.35);
    }
    
    .task-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    .task-description {
      color: #666;
      font-size: 14px;
      margin-bottom: 8px;
      line-height: 1.4;
    }
    
    .task-deadline {
      color: #999;
      font-size: 13px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .task-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .btn-submit, .btn-view {
      padding: 10px 20px;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 700;
      transition: all 0.3s;
      position: relative;
      z-index: 1;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .btn-submit {
      background: linear-gradient(135deg, #a78bfa 0%, #c084fc 100%);
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-submit:hover {
      background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(167, 139, 250, 0.4);
    }
    
    .btn-view {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      color: #78350f;
      font-weight: 700;
    }
    
    .btn-view:hover {
      background: linear-gradient(135deg, #fde68a 0%, #fcd34d 100%);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(252, 211, 77, 0.4);
    }
    
    .task-status {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      margin-top: 8px;
    }
    
    .status-waiting {
      background: #fff3e0;
      color: #f57c00;
    }
    
    .status-graded {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #999;
    }
    
    .empty-icon {
      font-size: 48px;
      margin-bottom: 12px;
      opacity: 0.5;
    }
    
    .notification-banner {
      background: linear-gradient(135deg, #fb7185 0%, #f472b6 50%, #fbbf24 100%);
      color: white;
      padding: 20px 30px;
      border-radius: 25px;
      margin-bottom: 25px;
      display: none;
      align-items: center;
      gap: 16px;
      box-shadow: 0 10px 35px rgba(251, 113, 133, 0.4), 0 0 0 5px rgba(255,255,255,0.8);
      border: 4px solid rgba(255,255,255,0.9);
      position: relative;
      z-index: 1;
      animation: notificationPulse 2s ease-in-out infinite;
    }
    
    @keyframes notificationPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    
    .notification-icon {
      font-size: 24px;
      animation: ring 1s infinite;
    }
    
    @keyframes ring {
      0%, 100% { transform: rotate(0deg); }
      10%, 30% { transform: rotate(-10deg); }
      20%, 40% { transform: rotate(10deg); }
    }
    
    .notification-text {
      flex: 1;
      font-weight: 600;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #fef3c7 0%, #fce7f3 50%, #ddd6fe 100%);
      border-radius: 30px;
      padding: 35px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      border: 5px solid rgba(255,255,255,0.95);
      animation: modalSlideIn 0.3s ease-out;
    }
    
    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px) scale(0.9);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .modal-title {
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }
    
    .btn-close {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: #999;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s;
    }
    
    .btn-close:hover {
      background: #f5f5f5;
      color: #333;
    }
    
    .upload-area {
      border: 4px dashed #a78bfa;
      border-radius: 25px;
      padding: 40px;
      text-align: center;
      margin-bottom: 25px;
      cursor: pointer;
      transition: all 0.3s;
      background: linear-gradient(135deg, #ddd6fe 0%, #e0e7ff 100%);
      position: relative;
      overflow: hidden;
    }
    
    .upload-area::before {
      content: 'üì§ ‚ú® üåü ‚≠ê';
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 40px;
      opacity: 0.1;
    }
    
    .upload-area:hover {
      background: linear-gradient(135deg, #c4b5fd 0%, #ddd6fe 100%);
      border-color: #7c3aed;
      transform: scale(1.02);
      box-shadow: 0 10px 30px rgba(167, 139, 250, 0.3);
    }
    
    .upload-icon {
      font-size: 48px;
      margin-bottom: 12px;
    }
    
    .upload-text {
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .upload-hint {
      color: #666;
      font-size: 14px;
    }
    
    .file-input {
      display: none;
    }
    
    .file-preview {
      background: #f5f5f5;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 16px;
      display: none;
    }
    
    .file-preview img {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 12px;
    }
    
    .file-info {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .file-name {
      font-weight: 600;
      color: #333;
      flex: 1;
    }
    
    .btn-remove {
      padding: 6px 12px;
      background: #ef5350;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
    }
    
    .link-input-group {
      margin-bottom: 20px;
    }
    
    .link-input-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
    }
    
    .link-input-group input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 14px;
    }
    
    .link-input-group input:focus {
      outline: none;
      border-color: #42a5f5;
    }
    
    .btn-submit-task {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-submit-task:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 187, 106, 0.4);
    }
    
    .btn-submit-task:disabled {
      background: #e0e0e0;
      cursor: not-allowed;
      transform: none;
    }
    
    .teacher-section {
      background: white;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      margin-bottom: 24px;
    }
    
    .section-title {
      font-size: 20px;
      font-weight: bold;
      color: #333;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .btn-add-task {
      padding: 14px 28px;
      background: linear-gradient(135deg, #a78bfa 0%, #fb7185 50%, #fbbf24 100%);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 17px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 8px 25px rgba(167, 139, 250, 0.4), 0 0 0 4px rgba(255,255,255,0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .btn-add-task:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 12px 40px rgba(167, 139, 250, 0.5), 0 0 0 6px rgba(255,255,255,0.8);
    }
    
    .task-list {
      display: grid;
      gap: 16px;
    }
    
    .teacher-task-card {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 12px;
      border-left: 4px solid #42a5f5;
    }
    
    .student-list {
      display: grid;
      gap: 12px;
      margin-top: 16px;
    }
    
    .student-item {
      background: white;
      padding: 16px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .student-info {
      flex: 1;
    }
    
    .student-number {
      font-weight: 600;
      color: #666;
      margin-right: 8px;
    }
    
    .student-name {
      font-weight: 600;
      color: #333;
    }
    
    .student-status {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
    }
    
    .status-submitted {
      background: #e8f5e9;
      color: #2e7d32;
    }
    
    .status-not-submitted {
      background: #ffebee;
      color: #c62828;
    }
    
    .btn-review {
      padding: 8px 16px;
      background: #42a5f5;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }
    
    .btn-review:hover {
      background: #1e88e5;
    }
    
    .btn-review:disabled {
      background: #e0e0e0;
      cursor: not-allowed;
    }
    
    .btn-delete-task {
      padding: 12px 24px;
      background: linear-gradient(135deg, #ef5350 0%, #e53935 100%);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 700;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(239, 83, 80, 0.3);
      margin-top: 16px;
    }
    
    .btn-delete-task:hover {
      background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(239, 83, 80, 0.4);
    }
    
    .btn-delete-task:active {
      transform: translateY(0);
    }
    
    .delete-confirm-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 20px;
    }
    
    .delete-confirm-box {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 100%;
      text-align: center;
      animation: modalSlideIn 0.3s ease-out;
    }
    
    .delete-confirm-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }
    
    .delete-confirm-title {
      font-size: 22px;
      font-weight: 700;
      color: #333;
      margin-bottom: 12px;
    }
    
    .delete-confirm-message {
      color: #666;
      margin-bottom: 24px;
      line-height: 1.5;
    }
    
    .delete-confirm-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .btn-confirm-delete {
      padding: 12px 24px;
      background: linear-gradient(135deg, #ef5350 0%, #e53935 100%);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 700;
      transition: all 0.2s;
    }
    
    .btn-confirm-delete:hover {
      background: linear-gradient(135deg, #e53935 0%, #c62828 100%);
      transform: translateY(-2px);
    }
    
    .btn-cancel-delete {
      padding: 12px 24px;
      background: #e0e0e0;
      color: #333;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 700;
      transition: all 0.2s;
    }
    
    .btn-cancel-delete:hover {
      background: #bdbdbd;
      transform: translateY(-2px);
    }
    
    .submission-view {
      margin-top: 20px;
    }
    
    .submission-file {
      background: #f5f5f5;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .submission-file img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 12px;
    }
    
    .grade-input-group {
      margin-top: 20px;
    }
    
    .grade-input-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
    }
    
    .grade-input-group input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 16px;
    }
    
    .grade-input-group input:focus {
      outline: none;
      border-color: #42a5f5;
    }
    
    .btn-save-grade {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 16px;
    }
    
    .btn-save-grade:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 187, 106, 0.4);
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #42a5f5;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .footer-section {
      background: linear-gradient(135deg, #fef3c7 0%, #fce7f3 50%, #ddd6fe 100%);
      padding: 40px;
      border-radius: 30px;
      box-shadow: 0 10px 40px rgba(167, 139, 250, 0.3), 0 0 0 6px rgba(255,255,255,0.9);
      margin-top: 40px;
      border: 4px solid rgba(255,255,255,0.9);
      position: relative;
      z-index: 1;
      overflow: hidden;
    }
    
    .footer-section::before {
      content: '‚ú® üåü üí´ ‚≠ê';
      position: absolute;
      top: 20px;
      right: -20px;
      font-size: 60px;
      opacity: 0.1;
      transform: rotate(-15deg);
    }
    
    .footer-title {
      font-size: 32px;
      font-weight: 900;
      background: linear-gradient(135deg, #a78bfa 0%, #fb7185 50%, #fbbf24 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 25px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
    }
    
    .footer-content {
      background: white;
      padding: 30px;
      border-radius: 25px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      border: 3px solid rgba(255,255,255,0.9);
    }
    
    .footer-subtitle {
      font-size: 20px;
      font-weight: 700;
      color: #5a4d6f;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .creator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .creator-card {
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      padding: 25px;
      border-radius: 20px;
      border: 3px solid #60a5fa;
      box-shadow: 0 8px 20px rgba(96, 165, 250, 0.2);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    
    .creator-card::before {
      content: 'üë©‚Äçüíª';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 80px;
      opacity: 0.1;
    }
    
    .creator-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 15px 35px rgba(96, 165, 250, 0.35);
    }
    
    .creator-name {
      font-size: 18px;
      font-weight: 800;
      color: #1e40af;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .creator-instagram {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #5b21b6;
      font-weight: 600;
      font-size: 15px;
      background: rgba(255,255,255,0.7);
      padding: 10px 15px;
      border-radius: 12px;
      transition: all 0.3s;
    }
    
    .creator-instagram:hover {
      background: white;
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    }
    
    .school-info {
      background: linear-gradient(135deg, #d1fae5 0%, #dbeafe 100%);
      padding: 25px;
      border-radius: 20px;
      border: 3px solid #34d399;
      text-align: center;
      box-shadow: 0 8px 20px rgba(52, 211, 153, 0.2);
      position: relative;
      overflow: hidden;
    }
    
    .school-info::before {
      content: 'ÔøΩÔøΩÔøΩ';
      position: absolute;
      top: -15px;
      right: -15px;
      font-size: 100px;
      opacity: 0.1;
    }
    
    .school-badge {
      display: inline-block;
      background: white;
      padding: 15px 25px;
      border-radius: 15px;
      font-weight: 700;
      color: #065f46;
      font-size: 16px;
      box-shadow: 0 4px 15px rgba(52, 211, 153, 0.2);
      margin-top: 10px;
    }
    
    .school-detail {
      color: #047857;
      font-weight: 600;
      margin-top: 12px;
      font-size: 15px;
    }
    
    @media (max-width: 768px) {
      .columns-container {
        grid-template-columns: 1fr;
      }
      
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .user-info {
        width: 100%;
        justify-content: space-between;
      }
      
      .creator-grid {
        grid-template-columns: 1fr;
      }
      
      .footer-section {
        padding: 25px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="app"><!-- Login Screen -->
   <div id="loginScreen" class="login-container">
    <div class="login-box">
     <div class="app-logo">
      üìö
     </div>
     <h1 class="app-title" id="appTitle">RemindU</h1>
     <p class="app-subtitle" id="welcomeMessage">Selamat datang di RemindU</p>
     <form id="loginForm">
      <div class="form-group"><label for="nipNis" id="loginInstruction">Masukkan NIP atau NIS Anda</label> <input type="text" id="nipNis" placeholder="Contoh: 123456789" required>
      </div><button type="submit" class="btn-primary"> Masuk üöÄ </button>
     </form>
     <div id="errorMessage" class="error-message"></div>
    </div><!-- About Section on Login Page -->
    <div class="footer-section" style="max-width: 450px; margin-top: 30px;">
     <h2 class="footer-title">üìû Tentang Kami</h2>
     <div class="footer-content">
      <div class="footer-subtitle"><span>üë©‚Äçüíª</span> <span>Pembuat Website</span>
      </div>
      <div class="creator-grid">
       <div class="creator-card">
        <div class="creator-name"><span>‚ú®</span> <span>Navisya Aura Mada</span>
        </div><a href="https://instagram.com/cnmrlle" target="_blank" rel="noopener noreferrer" class="creator-instagram"> <span>üì∑</span> <span>@cnmrlle</span> </a>
       </div>
       <div class="creator-card">
        <div class="creator-name"><span>‚ú®</span> <span>Nessa Achdia Magdalena Tunggadewi</span>
        </div><a href="https://instagram.com/_ns4cda_" target="_blank" rel="noopener noreferrer" class="creator-instagram"> <span>ÔøΩÔøΩÔøΩÔøΩ</span> <span>@_ns4cda_</span> </a>
       </div>
      </div>
      <div class="school-info">
       <div class="footer-subtitle" style="justify-content: center; margin-bottom: 15px;"><span>üéì</span> <span>Informasi Sekolah</span>
       </div>
       <div class="school-badge">
        üè´ SMA Negeri Mojoagung
       </div>
       <div class="school-detail">
        üìö Pelajar Studi Ilmu Pengetahuan Alam
       </div>
      </div>
     </div>
    </div>
   </div><!-- Student Dashboard -->
   <div id="studentDashboard" class="dashboard-student">
    <div class="container">
     <div class="header">
      <div class="header-left">
       <div class="header-icon">
        üìö
       </div>
       <div>
        <div class="header-title">
         Dashboard Siswa
        </div>
       </div>
      </div>
      <div class="user-info"><span>üë§</span> <span class="user-name" id="studentName">-</span> <button class="btn-logout" id="logoutStudent">Keluar</button>
      </div>
     </div>
     <div id="notificationBanner" class="notification-banner"><span class="notification-icon">üîî</span> <span class="notification-text" id="notificationText"></span>
     </div>
     <div class="columns-container"><!-- Tugas Baru -->
      <div class="column column-new">
       <div class="column-header"><span class="column-icon">üìù</span> <span class="column-title">Tugas Baru</span>
       </div>
       <div id="newTasksList"></div>
      </div><!-- Tugas Mepet Deadline -->
      <div class="column column-urgent">
       <div class="column-header"><span class="column-icon">‚è∞</span> <span class="column-title">Tugas Mepet Deadline</span>
       </div>
       <div id="urgentTasksList"></div>
      </div><!-- Tugas Selesai -->
      <div class="column column-done">
       <div class="column-header"><span class="column-icon">‚úÖ</span> <span class="column-title">Tugas Selesai</span>
       </div>
       <div id="doneTasksList"></div>
      </div>
     </div>
    </div>
   </div><!-- Teacher Dashboard -->
   <div id="teacherDashboard" class="dashboard-teacher">
    <div class="container">
     <div class="header">
      <div class="header-left">
       <div class="header-icon">
        üë®‚ÄçÔøΩÔøΩÔøΩ
       </div>
       <div>
        <div class="header-title">
         Dashboard Guru
        </div>
       </div>
      </div>
      <div class="user-info"><span>üë§</span> <span class="user-name" id="teacherName">-</span> <button class="btn-logout" id="logoutTeacher">Keluar</button>
      </div>
     </div>
     <div class="teacher-section">
      <div class="section-title"><span>‚ûï</span> <span>Buat Tugas Baru</span>
      </div><button class="btn-add-task" id="btnAddTask"> <span>üìù</span> <span>Tambah Tugas</span> </button>
     </div>
     <div class="teacher-section">
      <div class="section-title"><span>üìã</span> <span>Daftar Tugas</span>
      </div>
      <div id="teacherTasksList" class="task-list"></div>
     </div>
    </div>
   </div><!-- Modal Upload Tugas -->
   <div id="uploadModal" class="modal">
    <div class="modal-content">
     <div class="modal-header">
      <h2 class="modal-title" id="uploadModalTitle">Kumpulkan Tugas</h2><button class="btn-close" id="closeUploadModal">√ó</button>
     </div>
     <div style="margin-bottom: 20px;"><label style="display: block; margin-bottom: 12px; font-weight: 600; color: #333;">Pilih cara mengumpulkan:</label>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 20px;"><button type="button" class="submission-type-btn" data-type="file" style="padding: 12px; background: #42a5f5; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s;"> üìÅ Upload File </button> <button type="button" class="submission-type-btn" data-type="photo" style="padding: 12px; background: #e0e0e0; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s;"> üì∑ Ambil Foto </button> <button type="button" class="submission-type-btn" data-type="link" style="padding: 12px; background: #e0e0e0; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s;"> üîó Link </button>
      </div>
     </div>
     <div id="fileUploadSection" style="display: block;">
      <div class="upload-area" id="uploadArea">
       <div class="upload-icon">
        üì§
       </div>
       <div class="upload-text">
        Klik atau seret file ke sini
       </div>
       <div class="upload-hint">
        Format: JPG, PNG, PDF, PPT, PPTX, DOC, DOCX
       </div>
      </div><input type="file" id="fileInput" class="file-input" accept=".jpg,.jpeg,.png,.pdf,.ppt,.pptx,.doc,.docx">
     </div>
     <div id="photoUploadSection" style="display: none;">
      <div class="upload-area" id="photoArea">
       <div class="upload-icon">
        üì∑
       </div>
       <div class="upload-text">
        Ambil foto dari kamera
       </div>
       <div class="upload-hint">
        Klik untuk membuka kamera
       </div>
      </div><input type="file" id="photoInput" class="file-input" accept="image/*" capture="environment">
     </div>
     <div id="linkUploadSection" style="display: none;">
      <div class="link-input-group"><label for="driveLink">Masukkan link (Google Drive, OneDrive, dll):</label> <input type="url" id="driveLink" placeholder="https://drive.google.com/..." style="width: 100%; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 14px;">
      </div>
     </div>
     <div id="filePreview" class="file-preview">
      <div id="previewImage"></div>
      <div class="file-info"><span class="file-name" id="fileName"></span> <button class="btn-remove" id="removeFile">Hapus</button>
      </div>
     </div><button class="btn-submit-task" id="submitTaskBtn" disabled> Kumpulkan Tugas üöÄ </button>
     <div class="loading-spinner" id="uploadLoading">
      <div class="spinner"></div>
      <p>Mengupload tugas...</p>
     </div>
    </div>
   </div><!-- Modal Buat Tugas (Guru) -->
   <div id="createTaskModal" class="modal">
    <div class="modal-content">
     <div class="modal-header">
      <h2 class="modal-title">Buat Tugas Baru</h2><button class="btn-close" id="closeCreateTaskModal">√ó</button>
     </div>
     <form id="createTaskForm">
      <div class="form-group"><label for="taskTitle">Judul Tugas</label> <input type="text" id="taskTitle" required placeholder="Contoh: Membuat Esai Bahasa Indonesia">
      </div>
      <div class="form-group"><label for="taskDescription">Deskripsi Tugas</label> <input type="text" id="taskDescription" required placeholder="Jelaskan detail tugas...">
      </div>
      <div class="form-group"><label for="taskDeadline">Deadline</label> <input type="date" id="taskDeadline" required>
      </div><button type="submit" class="btn-primary"> Buat Tugas üìù </button>
     </form>
    </div>
   </div><!-- Modal Review & Penilaian (Guru) -->
   <div id="reviewModal" class="modal">
    <div class="modal-content">
     <div class="modal-header">
      <h2 class="modal-title" id="reviewModalTitle">Review Tugas</h2><button class="btn-close" id="closeReviewModal">√ó</button>
     </div>
     <div id="submissionContent" class="submission-view"></div>
     <div class="grade-input-group"><label for="gradeInput">Berikan Nilai (0-100)</label> <input type="number" id="gradeInput" min="0" max="100" placeholder="Masukkan nilai...">
     </div><button class="btn-save-grade" id="saveGradeBtn"> Simpan Nilai üíØ </button>
    </div>
   </div><!-- Delete Confirmation Overlay -->
   <div id="deleteConfirmOverlay" class="delete-confirm-overlay">
    <div class="delete-confirm-box">
     <div class="delete-confirm-icon">
      ‚ö†Ô∏è
     </div>
     <div class="delete-confirm-title">
      Hapus Tugas?
     </div>
     <div class="delete-confirm-message" id="deleteConfirmMessage">
      Apakah Anda yakin ingin menghapus tugas ini? Semua pengumpulan siswa juga akan terhapus.
     </div>
     <div class="delete-confirm-actions"><button class="btn-cancel-delete" id="btnCancelDelete">Batal</button> <button class="btn-confirm-delete" id="btnConfirmDelete">Ya, Hapus</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: 'RemindU',
      welcome_message: 'Selamat datang di RemindU',
      login_instruction: 'Masukkan NIP atau NIS Anda',
      background_color: '#fef5ff',
      surface_color: '#ffffff',
      text_color: '#5a4d6f',
      primary_color: '#a78bfa',
      secondary_color: '#fb7185',
      font_family: 'Comic Sans MS',
      font_size: 16
    };
    
    const SAMPLE_DATA = {
      teachers: [
        { nip: '1022', name: 'Fajar Indra Kurniawan', subject: 'Guru' }
      ],
      students: [
        { nis: '8255', name: 'ABIFAEYZA MUHAMMAD DYAURRAHMAN', class: 'X-1', number: 1 },
        { nis: '8257', name: 'ABIYYU NAUFAL ZAKY ASNAR', class: 'X-1', number: 2 },
        { nis: '8273', name: 'AISYAH ZAHIRA', class: 'X-1', number: 3 },
        { nis: '8566', name: 'ALDO VANTINALDO', class: 'X-1', number: 4 },
        { nis: '8290', name: 'ANANTA PRATAMA', class: 'X-1', number: 5 },
        { nis: '8296', name: 'ANISAH PRATIWI', class: 'X-1', number: 6 },
        { nis: '8315', name: 'BACHRALFRIDHO REYSHADIN ILMAN', class: 'X-1', number: 7 },
        { nis: '8317', name: 'BENI RAIHAN ADRIANSYAH', class: 'X-1', number: 8 },
        { nis: '8338', name: 'DEA KAHAYA AISHAWA', class: 'X-1', number: 9 },
        { nis: '8346', name: 'DIRGAHAYU RISKA RAMADANI', class: 'X-1', number: 10 },
        { nis: '8365', name: 'FAWWAZKA FALAJ WAHANDY', class: 'X-1', number: 11 },
        { nis: '8374', name: 'GALUH AVRIL DINDA ZASKIA', class: 'X-1', number: 12 },
        { nis: '8387', name: 'JOSEPH KENZIE SURYA WIJAYA', class: 'X-1', number: 13 },
        { nis: '8404', name: 'LIVINA MARIA ASHRAEL', class: 'X-1', number: 14 },
        { nis: '8406', name: 'M. AHNAF RAMADHANI', class: 'X-1', number: 15 },
        { nis: '8433', name: 'MOHAMMAD ADAM RAYLIANSYAH', class: 'X-1', number: 16 },
        { nis: '8439', name: 'MUHAMMAD ALDO RIZQIANSYAH', class: 'X-1', number: 17 },
        { nis: '8450', name: 'MUHAMMAD HENDRIK.A.P', class: 'X-1', number: 18 },
        { nis: '8571', name: 'MUHAMMAD IZZULIL HAQ', class: 'X-1', number: 19 },
        { nis: '8458', name: 'MUHAMMAD SATRIA MAULANA', class: 'X-1', number: 20 },
        { nis: '8461', name: 'MUHAMMAD SYAUQIL JINAN', class: 'X-1', number: 21 },
        { nis: '8462', name: 'MUHAMMAD WAHYU AL AKBAR', class: 'X-1', number: 22 },
        { nis: '8464', name: 'MUKHAMMAD RIZQI YAHYA', class: 'X-1', number: 23 },
        { nis: '8476', name: 'NAVISYA AURA MADA', class: 'X-1', number: 24 },
        { nis: '8483', name: 'NESSA ACHDIA MAGDALENA TUNGGADEWI', class: 'X-1', number: 25 },
        { nis: '8573', name: 'OCTAVIAN AMRULLAH', class: 'X-1', number: 26 },
        { nis: '8513', name: 'REIVALDIANO BINTANG MAHARDIKA', class: 'X-1', number: 27 },
        { nis: '8516', name: 'REVANO ARDIANSA PUTRA RAMADANI', class: 'X-1', number: 28 },
        { nis: '8519', name: 'RIFQI ATHALLAH SYAH', class: 'X-1', number: 29 },
        { nis: '8522', name: 'RIZA AKBAR ALMUQSITH', class: 'X-1', number: 30 },
        { nis: '8524', name: 'RIZKI ANDI ABDILLAH', class: 'X-1', number: 31 },
        { nis: '8530', name: 'SALSA BIEANKA FEBITAMA', class: 'X-1', number: 32 },
        { nis: '8544', name: 'TIARA VIONA VIRDAUS', class: 'X-1', number: 33 },
        { nis: '8559', name: 'YOSSI AMRU AT-TAUFIK', class: 'X-1', number: 34 },
        { nis: '8562', name: 'ZALFA NAIDIA NATASYA', class: 'X-1', number: 35 },
        { nis: '8576', name: 'ZASKIA FAIDA AZMI', class: 'X-1', number: 36 }
      ]
    };
    
    let currentUser = null;
    let currentAssignment = null;
    let currentSubmission = null;
    let selectedFile = null;
    let allAssignments = [];
    let allSubmissions = [];
    let taskToDelete = null;
    
    const dataHandler = {
      onDataChanged(data) {
        allAssignments = data.filter(item => item.type === 'assignment');
        allSubmissions = data.filter(item => item.type === 'submission');
        
        if (currentUser) {
          if (currentUser.role === 'student') {
            renderStudentDashboard();
          } else if (currentUser.role === 'teacher') {
            renderTeacherDashboard();
          }
        }
      }
    };
    
    async function init() {
      const initResult = await window.dataSdk.init(dataHandler);
      if (!initResult.isOk) {
        console.error('Failed to initialize data SDK');
        return;
      }
      
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }
      
      setupEventListeners();
      checkLoginStatus();
    }
    
    async function onConfigChange(config) {
      const appTitle = config.app_title || defaultConfig.app_title;
      const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;
      const loginInstruction = config.login_instruction || defaultConfig.login_instruction;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const fontSize = config.font_size || defaultConfig.font_size;
      
      document.getElementById('appTitle').textContent = appTitle;
      document.getElementById('welcomeMessage').textContent = welcomeMessage;
      document.getElementById('loginInstruction').textContent = loginInstruction;
      
      document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, #fce4ec 100%)`;
      document.body.style.fontFamily = `${fontFamily}, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif`;
      document.body.style.color = textColor;
      
      const loginBox = document.querySelector('.login-box');
      if (loginBox) loginBox.style.background = surfaceColor;
      
      const headers = document.querySelectorAll('.header');
      headers.forEach(header => header.style.background = surfaceColor);
      
      const columns = document.querySelectorAll('.column');
      columns.forEach(column => column.style.background = surfaceColor);
      
      const sections = document.querySelectorAll('.teacher-section');
      sections.forEach(section => section.style.background = surfaceColor);
      
      const modalContents = document.querySelectorAll('.modal-content');
      modalContents.forEach(modal => modal.style.background = surfaceColor);
      
      const btnPrimary = document.querySelectorAll('.btn-primary');
      btnPrimary.forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      });
      
      const btnAddTask = document.querySelectorAll('.btn-add-task');
      btnAddTask.forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      });
      
      const appTitleElements = document.querySelectorAll('.app-title, .header-title');
      appTitleElements.forEach(el => {
        el.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
        el.style.webkitBackgroundClip = 'text';
        el.style.webkitTextFillColor = 'transparent';
        el.style.backgroundClip = 'text';
      });
      
      const btnSubmit = document.querySelectorAll('.btn-submit');
      btnSubmit.forEach(btn => btn.style.background = primaryColor);
      
      const btnReview = document.querySelectorAll('.btn-review');
      btnReview.forEach(btn => btn.style.background = primaryColor);
      
      const uploadArea = document.querySelectorAll('.upload-area');
      uploadArea.forEach(area => {
        area.style.borderColor = primaryColor;
        area.style.background = `${backgroundColor}`;
      });
      
      document.querySelectorAll('h1, h2, h3').forEach(el => {
        el.style.fontSize = `${fontSize * 1.5}px`;
      });
      
      document.querySelectorAll('p, div, span, label, input, button').forEach(el => {
        if (!el.classList.contains('app-title') && !el.classList.contains('header-title')) {
          el.style.fontSize = `${fontSize}px`;
        }
      });
    }
    
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ secondary_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            if (window.elementSdk) window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            if (window.elementSdk) window.elementSdk.setConfig({ font_size: value });
          }
        }
      };
    }
    
    function mapToEditPanelValues(config) {
      return new Map([
        ['app_title', config.app_title || defaultConfig.app_title],
        ['welcome_message', config.welcome_message || defaultConfig.welcome_message],
        ['login_instruction', config.login_instruction || defaultConfig.login_instruction]
      ]);
    }
    
    function setupEventListeners() {
      document.getElementById('loginForm').addEventListener('submit', handleLogin);
      document.getElementById('logoutStudent').addEventListener('click', handleLogout);
      document.getElementById('logoutTeacher').addEventListener('click', handleLogout);
      
      document.getElementById('closeUploadModal').addEventListener('click', () => {
        document.getElementById('uploadModal').style.display = 'none';
      });
      
      document.getElementById('uploadArea').addEventListener('click', () => {
        document.getElementById('fileInput').click();
      });
      
      document.getElementById('photoArea').addEventListener('click', () => {
        document.getElementById('photoInput').click();
      });
      
      const submissionTypeBtns = document.querySelectorAll('.submission-type-btn');
      submissionTypeBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          submissionTypeBtns.forEach(b => {
            b.style.background = '#e0e0e0';
            b.style.color = '#333';
          });
          
          e.target.style.background = '#42a5f5';
          e.target.style.color = 'white';
          
          const type = e.target.dataset.type;
          document.getElementById('fileUploadSection').style.display = type === 'file' ? 'block' : 'none';
          document.getElementById('photoUploadSection').style.display = type === 'photo' ? 'block' : 'none';
          document.getElementById('linkUploadSection').style.display = type === 'link' ? 'block' : 'none';
          
          selectedFile = null;
          document.getElementById('fileInput').value = '';
          document.getElementById('photoInput').value = '';
          document.getElementById('driveLink').value = '';
          document.getElementById('filePreview').style.display = 'none';
          checkSubmitEnabled();
        });
      });
      
      document.getElementById('fileInput').addEventListener('change', handleFileSelect);
      document.getElementById('photoInput').addEventListener('change', handleFileSelect);
      document.getElementById('removeFile').addEventListener('click', removeFile);
      document.getElementById('driveLink').addEventListener('input', checkSubmitEnabled);
      document.getElementById('submitTaskBtn').addEventListener('click', handleSubmitTask);
      
      document.getElementById('btnAddTask').addEventListener('click', () => {
        document.getElementById('createTaskModal').style.display = 'flex';
      });
      
      document.getElementById('closeCreateTaskModal').addEventListener('click', () => {
        document.getElementById('createTaskModal').style.display = 'none';
      });
      
      document.getElementById('createTaskForm').addEventListener('submit', handleCreateTask);
      
      document.getElementById('closeReviewModal').addEventListener('click', () => {
        document.getElementById('reviewModal').style.display = 'none';
      });
      
      document.getElementById('saveGradeBtn').addEventListener('click', handleSaveGrade);
      
      document.getElementById('btnCancelDelete').addEventListener('click', () => {
        document.getElementById('deleteConfirmOverlay').style.display = 'none';
        taskToDelete = null;
      });
      
      document.getElementById('btnConfirmDelete').addEventListener('click', handleConfirmDelete);
    }
    
    function handleLogin(e) {
      e.preventDefault();
      const nipNis = document.getElementById('nipNis').value.trim();
      
      const teacher = SAMPLE_DATA.teachers.find(t => t.nip === nipNis);
      if (teacher) {
        currentUser = { ...teacher, role: 'teacher', id: nipNis };
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        showDashboard('teacher');
        return;
      }
      
      const student = SAMPLE_DATA.students.find(s => s.nis === nipNis);
      if (student) {
        currentUser = { ...student, role: 'student', id: nipNis };
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        showDashboard('student');
        return;
      }
      
      const errorMsg = document.getElementById('errorMessage');
      errorMsg.textContent = 'NIP/NIS tidak ditemukan. Silakan coba lagi.';
      errorMsg.style.display = 'block';
    }
    
    function handleLogout() {
      localStorage.removeItem('currentUser');
      currentUser = null;
      showDashboard('login');
    }
    
    function checkLoginStatus() {
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showDashboard(currentUser.role);
      }
    }
    
    function showDashboard(type) {
      document.getElementById('loginScreen').style.display = 'none';
      document.getElementById('studentDashboard').style.display = 'none';
      document.getElementById('teacherDashboard').style.display = 'none';
      
      if (type === 'login') {
        document.getElementById('loginScreen').style.display = 'flex';
        document.getElementById('nipNis').value = '';
        document.getElementById('errorMessage').style.display = 'none';
      } else if (type === 'student') {
        document.getElementById('studentDashboard').style.display = 'block';
        document.getElementById('studentName').textContent = currentUser.name;
        renderStudentDashboard();
      } else if (type === 'teacher') {
        document.getElementById('teacherDashboard').style.display = 'block';
        document.getElementById('teacherName').textContent = currentUser.name;
        renderTeacherDashboard();
      }
    }
    
    function renderStudentDashboard() {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      const studentSubmissions = allSubmissions.filter(s => s.studentId === currentUser.id);
      const submittedAssignmentIds = studentSubmissions.map(s => s.assignmentId);
      
      const pendingAssignments = allAssignments.filter(a => !submittedAssignmentIds.includes(a.__backendId));
      
      const newTasks = [];
      const urgentTasks = [];
      let todayDeadlines = [];
      
      pendingAssignments.forEach(assignment => {
        const deadline = new Date(assignment.deadline);
        deadline.setHours(0, 0, 0, 0);
        const daysUntil = Math.floor((deadline - today) / (1000 * 60 * 60 * 24));
        
        if (daysUntil === 0) {
          todayDeadlines.push(assignment);
        }
        
        if (daysUntil <= 2 && daysUntil >= 0) {
          urgentTasks.push(assignment);
        } else if (daysUntil > 2) {
          newTasks.push(assignment);
        }
      });
      
      if (todayDeadlines.length > 0) {
        const notification = document.getElementById('notificationBanner');
        const notificationText = document.getElementById('notificationText');
        notificationText.textContent = `üö® ${todayDeadlines.length} tugas jatuh tempo hari ini!`;
        notification.style.display = 'flex';
      } else {
        document.getElementById('notificationBanner').style.display = 'none';
      }
      
      renderTaskColumn('newTasksList', newTasks, 'new');
      renderTaskColumn('urgentTasksList', urgentTasks, 'urgent');
      renderSubmittedTasks();
    }
    
    function renderTaskColumn(elementId, tasks, type) {
      const container = document.getElementById(elementId);
      
      if (tasks.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <div>Tidak ada tugas</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = tasks.map(task => {
        const deadline = new Date(task.deadline);
        const formattedDeadline = deadline.toLocaleDateString('id-ID', { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
        
        return `
          <div class="task-card" data-task-id="${task.__backendId}">
            <div class="task-title">${task.title}</div>
            <div class="task-description">${task.description}</div>
            <div class="task-deadline">
              ‚è∞ Deadline: ${formattedDeadline}
            </div>
            <div class="task-actions">
              <button class="btn-submit" data-task-id="${task.__backendId}">
                Kumpulkan Tugas
              </button>
            </div>
          </div>
        `;
      }).join('');
      
      container.querySelectorAll('.btn-submit').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const taskId = btn.getAttribute('data-task-id');
          openUploadModal(taskId);
        });
      });
    }
    
    function renderSubmittedTasks() {
      const container = document.getElementById('doneTasksList');
      const studentSubmissions = allSubmissions.filter(s => s.studentId === currentUser.id);
      
      if (studentSubmissions.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <div>Belum ada tugas yang dikumpulkan</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = studentSubmissions.map(submission => {
        const assignment = allAssignments.find(a => a.__backendId === submission.assignmentId);
        if (!assignment) return '';
        
        const hasGrade = submission.grade !== null && submission.grade !== undefined;
        const gradeDisplay = hasGrade 
          ? `<div style="display: flex; align-items: center; gap: 12px; margin-top: 12px; padding: 12px; background: #e8f5e9; border-radius: 8px; border-left: 4px solid #66bb6a;">
              <div style="font-size: 32px; font-weight: bold; color: #2e7d32;">${submission.grade}</div>
              <div>
                <div style="font-weight: 600; color: #2e7d32;">Nilai Anda</div>
                <div style="font-size: 13px; color: #666;">Sudah dinilai oleh guru</div>
              </div>
            </div>`
          : `<div class="task-status status-waiting">‚è≥ Menunggu Penilaian</div>`;
        
        return `
          <div class="task-card">
            <div class="task-title">${assignment.title}</div>
            <div class="task-description">${assignment.description}</div>
            <div class="task-deadline">
              üìÖ Dikumpulkan: ${new Date(submission.submittedAt).toLocaleDateString('id-ID')}
            </div>
            ${gradeDisplay}
            <div class="task-actions" style="margin-top: 12px;">
              <button class="btn-view" onclick="viewSubmission('${submission.__backendId}')">
                Lihat File
              </button>
            </div>
          </div>
        `;
      }).join('');
    }
    
    function openUploadModal(assignmentId) {
      currentAssignment = allAssignments.find(a => a.__backendId === assignmentId);
      
      if (!currentAssignment) {
        return;
      }
      
      document.getElementById('uploadModalTitle').textContent = `Kumpulkan: ${currentAssignment.title}`;
      document.getElementById('uploadModal').style.display = 'flex';
      
      const submissionTypeBtns = document.querySelectorAll('.submission-type-btn');
      submissionTypeBtns.forEach(b => {
        b.style.background = '#e0e0e0';
        b.style.color = '#333';
      });
      submissionTypeBtns[0].style.background = '#42a5f5';
      submissionTypeBtns[0].style.color = 'white';
      
      document.getElementById('fileUploadSection').style.display = 'block';
      document.getElementById('photoUploadSection').style.display = 'none';
      document.getElementById('linkUploadSection').style.display = 'none';
      
      selectedFile = null;
      document.getElementById('fileInput').value = '';
      document.getElementById('photoInput').value = '';
      document.getElementById('filePreview').style.display = 'none';
      document.getElementById('driveLink').value = '';
      document.getElementById('submitTaskBtn').disabled = true;
    }
    
    function handleFileSelect(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const validTypes = [
        'image/jpeg', 'image/jpg', 'image/png',
        'application/pdf',
        'application/vnd.ms-powerpoint', 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
      ];
      
      if (!validTypes.includes(file.type)) {
        alert('Format file tidak didukung. Gunakan JPG, PNG, PDF, PPT, PPTX, DOC, atau DOCX.');
        return;
      }
      
      selectedFile = file;
      displayFilePreview(file);
      checkSubmitEnabled();
    }
    
    function displayFilePreview(file) {
      const preview = document.getElementById('filePreview');
      const previewImage = document.getElementById('previewImage');
      const fileName = document.getElementById('fileName');
      
      fileName.textContent = file.name;
      
      if (file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (e) => {
          previewImage.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
        };
        reader.readAsDataURL(file);
      } else {
        previewImage.innerHTML = `<div style="padding: 20px; text-align: center; background: #e3f2fd; border-radius: 8px;">üìÑ ${file.name}</div>`;
      }
      
      preview.style.display = 'block';
    }
    
    function removeFile() {
      selectedFile = null;
      document.getElementById('fileInput').value = '';
      document.getElementById('filePreview').style.display = 'none';
      checkSubmitEnabled();
    }
    
    function checkSubmitEnabled() {
      const driveLink = document.getElementById('driveLink').value.trim();
      const submitBtn = document.getElementById('submitTaskBtn');
      submitBtn.disabled = !selectedFile && !driveLink;
    }
    
    async function handleSubmitTask() {
      if (!currentAssignment || (!selectedFile && !document.getElementById('driveLink').value.trim())) {
        return;
      }
      
      const loadingSpinner = document.getElementById('uploadLoading');
      const submitBtn = document.getElementById('submitTaskBtn');
      
      submitBtn.disabled = true;
      loadingSpinner.style.display = 'block';
      
      let fileData = '';
      let fileName = '';
      let fileType = '';
      
      if (selectedFile) {
        const reader = new FileReader();
        fileData = await new Promise((resolve) => {
          reader.onload = (e) => resolve(e.target.result);
          reader.readAsDataURL(selectedFile);
        });
        fileName = selectedFile.name;
        fileType = selectedFile.type;
      } else {
        const driveLink = document.getElementById('driveLink').value.trim();
        fileData = driveLink;
        fileName = 'Google Drive Link';
        fileType = 'link';
      }
      
      const submission = {
        type: 'submission',
        assignmentId: currentAssignment.__backendId,
        studentId: currentUser.id,
        fileName: fileName,
        fileType: fileType,
        fileData: fileData,
        submittedAt: new Date().toISOString(),
        grade: null
      };
      
      const result = await window.dataSdk.create(submission);
      
      loadingSpinner.style.display = 'none';
      
      if (result.isOk) {
        document.getElementById('uploadModal').style.display = 'none';
        selectedFile = null;
        document.getElementById('fileInput').value = '';
        document.getElementById('photoInput').value = '';
        document.getElementById('driveLink').value = '';
        document.getElementById('filePreview').style.display = 'none';
      } else {
        alert('Gagal mengumpulkan tugas. Silakan coba lagi.');
        submitBtn.disabled = false;
      }
    }
    
    function viewSubmission(submissionId) {
      const submission = allSubmissions.find(s => s.__backendId === submissionId);
      if (!submission) return;
      
      const modal = document.getElementById('uploadModal');
      const modalTitle = document.getElementById('uploadModalTitle');
      const assignment = allAssignments.find(a => a.__backendId === submission.assignmentId);
      
      modalTitle.textContent = `File: ${assignment ? assignment.title : 'Tugas'}`;
      
      document.getElementById('uploadArea').style.display = 'none';
      document.getElementById('fileInput').style.display = 'none';
      document.getElementById('driveLink').parentElement.style.display = 'none';
      document.getElementById('submitTaskBtn').style.display = 'none';
      
      const preview = document.getElementById('filePreview');
      const previewImage = document.getElementById('previewImage');
      const fileName = document.getElementById('fileName');
      
      fileName.textContent = submission.fileName;
      document.getElementById('removeFile').style.display = 'none';
      
      if (submission.fileType.startsWith('image/')) {
        previewImage.innerHTML = `<img src="${submission.fileData}" alt="Submission">`;
      } else if (submission.fileType === 'link') {
        previewImage.innerHTML = `
          <div style="padding: 20px; background: #e3f2fd; border-radius: 8px; text-align: center;">
            <div style="margin-bottom: 12px;">üîó Google Drive Link</div>
            <a href="${submission.fileData}" target="_blank" rel="noopener noreferrer" style="color: #42a5f5; word-break: break-all;">${submission.fileData}</a>
          </div>
        `;
      } else {
        previewImage.innerHTML = `<div style="padding: 20px; text-align: center; background: #e3f2fd; border-radius: 8px;">üìÑ ${submission.fileName}</div>`;
      }
      
      preview.style.display = 'block';
      modal.style.display = 'flex';
      
      const closeBtn = document.getElementById('closeUploadModal');
      closeBtn.onclick = () => {
        modal.style.display = 'none';
        document.getElementById('uploadArea').style.display = 'block';
        document.getElementById('fileInput').style.display = 'block';
        document.getElementById('driveLink').parentElement.style.display = 'block';
        document.getElementById('submitTaskBtn').style.display = 'block';
        document.getElementById('removeFile').style.display = 'inline-block';
        closeBtn.onclick = () => modal.style.display = 'none';
      };
    }
    
    async function handleCreateTask(e) {
      e.preventDefault();
      
      const title = document.getElementById('taskTitle').value.trim();
      const description = document.getElementById('taskDescription').value.trim();
      const deadline = document.getElementById('taskDeadline').value;
      
      if (!title || !description || !deadline) return;
      
      const assignment = {
        type: 'assignment',
        title: title,
        description: description,
        deadline: deadline,
        createdBy: currentUser.id,
        createdAt: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(assignment);
      
      if (result.isOk) {
        document.getElementById('createTaskModal').style.display = 'none';
        document.getElementById('createTaskForm').reset();
      } else {
        alert('Gagal membuat tugas. Silakan coba lagi.');
      }
    }
    
    function renderTeacherDashboard() {
      const container = document.getElementById('teacherTasksList');
      
      if (allAssignments.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üì≠</div>
            <div>Belum ada tugas yang dibuat</div>
          </div>
        `;
        return;
      }
      
      container.innerHTML = allAssignments.map(assignment => {
        const deadline = new Date(assignment.deadline);
        const formattedDeadline = deadline.toLocaleDateString('id-ID', { 
          weekday: 'long', 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric' 
        });
        
        const assignmentSubmissions = allSubmissions.filter(s => s.assignmentId === assignment.__backendId);
        const totalStudents = SAMPLE_DATA.students.length;
        const submittedCount = assignmentSubmissions.length;
        
        return `
          <div class="teacher-task-card">
            <div class="task-title">${assignment.title}</div>
            <div class="task-description">${assignment.description}</div>
            <div class="task-deadline">‚è∞ Deadline: ${formattedDeadline}</div>
            <div style="margin-top: 12px; padding: 12px; background: white; border-radius: 8px; font-weight: 600;">
              üìä Pengumpulan: ${submittedCount}/${totalStudents} siswa
            </div>
            
            <button class="btn-delete-task" onclick="showDeleteConfirm('${assignment.__backendId}', '${assignment.title}')">
              <span>üóëÔ∏è</span>
              <span>Hapus Tugas</span>
            </button>
            
            <div class="student-list">
              ${SAMPLE_DATA.students.map(student => {
                const submission = assignmentSubmissions.find(s => s.studentId === student.nis);
                const hasSubmitted = !!submission;
                
                return `
                  <div class="student-item">
                    <div class="student-info">
                      <span class="student-number">${student.number}.</span>
                      <span class="student-name">${student.name}</span>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                      <span class="student-status ${hasSubmitted ? 'status-submitted' : 'status-not-submitted'}">
                        ${hasSubmitted ? '‚úÖ Sudah' : '‚ùå Belum'}
                      </span>
                      <button class="btn-review" ${!hasSubmitted ? 'disabled' : ''} 
                        onclick="openReviewModal('${assignment.__backendId}', '${student.nis}')">
                        ${hasSubmitted ? 'Review' : 'Menunggu'}
                      </button>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        `;
      }).join('');
    }
    
    function openReviewModal(assignmentId, studentId) {
      const assignment = allAssignments.find(a => a.__backendId === assignmentId);
      const student = SAMPLE_DATA.students.find(s => s.nis === studentId);
      const submission = allSubmissions.find(s => s.assignmentId === assignmentId && s.studentId === studentId);
      
      if (!assignment || !student || !submission) return;
      
      currentSubmission = submission;
      
      document.getElementById('reviewModalTitle').textContent = `${student.name} - ${assignment.title}`;
      
      const submissionContent = document.getElementById('submissionContent');
      
      let filePreviewHtml = '';
      if (submission.fileType.startsWith('image/')) {
        filePreviewHtml = `<img src="${submission.fileData}" alt="Submission" style="max-width: 100%; border-radius: 8px;">`;
      } else if (submission.fileType === 'link') {
        filePreviewHtml = `
          <div style="padding: 20px; background: #e3f2fd; border-radius: 8px; text-align: center;">
            <div style="margin-bottom: 12px; font-weight: 600;">üîó Google Drive Link</div>
            <a href="${submission.fileData}" target="_blank" rel="noopener noreferrer" style="color: #42a5f5; word-break: break-all;">${submission.fileData}</a>
          </div>
        `;
      } else {
        filePreviewHtml = `
          <div style="padding: 20px; background: #e3f2fd; border-radius: 8px; text-align: center;">
            üìÑ ${submission.fileName}
          </div>
        `;
      }
      
      submissionContent.innerHTML = `
        <div class="submission-file">
          <div style="font-weight: 600; margin-bottom: 8px;">File yang dikumpulkan:</div>
          ${filePreviewHtml}
          <div style="margin-top: 12px; color: #666; font-size: 14px;">
            üìÖ Dikumpulkan: ${new Date(submission.submittedAt).toLocaleString('id-ID')}
          </div>
        </div>
      `;
      
      document.getElementById('gradeInput').value = submission.grade || '';
      document.getElementById('reviewModal').style.display = 'flex';
    }
    
    async function handleSaveGrade() {
      if (!currentSubmission) return;
      
      const gradeInput = document.getElementById('gradeInput');
      const grade = parseInt(gradeInput.value);
      
      if (isNaN(grade) || grade < 0 || grade > 100) {
        alert('Masukkan nilai antara 0-100');
        return;
      }
      
      const updatedSubmission = { ...currentSubmission, grade: grade };
      
      const result = await window.dataSdk.update(updatedSubmission);
      
      if (result.isOk) {
        document.getElementById('reviewModal').style.display = 'none';
        currentSubmission = null;
      } else {
        alert('Gagal menyimpan nilai. Silakan coba lagi.');
      }
    }
    
    function showDeleteConfirm(assignmentId, taskTitle) {
      taskToDelete = assignmentId;
      document.getElementById('deleteConfirmMessage').textContent = 
        `Apakah Anda yakin ingin menghapus tugas "${taskTitle}"? Semua pengumpulan siswa juga akan terhapus.`;
      document.getElementById('deleteConfirmOverlay').style.display = 'flex';
    }
    
    async function handleConfirmDelete() {
      if (!taskToDelete) return;
      
      const assignmentToDelete = allAssignments.find(a => a.__backendId === taskToDelete);
      if (!assignmentToDelete) return;
      
      const relatedSubmissions = allSubmissions.filter(s => s.assignmentId === taskToDelete);
      
      for (const submission of relatedSubmissions) {
        const deleteResult = await window.dataSdk.delete(submission);
        if (!deleteResult.isOk) {
          alert('Gagal menghapus pengumpulan siswa. Silakan coba lagi.');
          return;
        }
      }
      
      const deleteAssignmentResult = await window.dataSdk.delete(assignmentToDelete);
      
      if (deleteAssignmentResult.isOk) {
        document.getElementById('deleteConfirmOverlay').style.display = 'none';
        taskToDelete = null;
      } else {
        alert('Gagal menghapus tugas. Silakan coba lagi.');
      }
    }
    
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a1c1d8a5383fb86',t:'MTc2MzY4NTQxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>